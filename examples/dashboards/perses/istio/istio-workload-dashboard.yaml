kind: Dashboard
metadata:
    name: istio-workload-dashboard
    createdAt: 0001-01-01T00:00:00Z
    updatedAt: 0001-01-01T00:00:00Z
    version: 0
    project: perses-dev
spec:
    display:
        name: Istio Workload Dashboard
    variables:
        - kind: ListVariable
          spec:
            display:
                name: Namespace
                hidden: false
            defaultValue: bookinfo
            allowAllValue: false
            allowMultiple: false
            plugin:
                kind: PrometheusPromQLVariable
                spec:
                    datasource:
                        kind: PrometheusDatasource
                        name: prometheus-datasource
                    expr: sum(istio_requests_total) by (destination_workload_namespace) or sum(istio_tcp_sent_bytes_total) by (destination_workload_namespace)
                    labelName: destination_workload_namespace
            name: namespace
        - kind: ListVariable
          spec:
            display:
                name: Workload
                hidden: false
            defaultValue: details-v1
            allowAllValue: false
            allowMultiple: false
            plugin:
                kind: PrometheusPromQLVariable
                spec:
                    datasource:
                        kind: PrometheusDatasource
                        name: prometheus-datasource
                    expr: (sum(istio_requests_total{destination_workload_namespace=~"$namespace"}) by (destination_workload) or sum(istio_requests_total{source_workload_namespace=~"$namespace"}) by (source_workload)) or (sum(istio_tcp_sent_bytes_total{destination_workload_namespace=~"$namespace"}) by (destination_workload) or sum(istio_tcp_sent_bytes_total{source_workload_namespace=~"$namespace"}) by (source_workload))
                    labelName: source_workload
            name: workload
        - kind: ListVariable
          spec:
            display:
                name: Reporter
                hidden: false
            defaultValue: destination
            allowAllValue: false
            allowMultiple: true
            plugin:
                kind: PrometheusLabelValuesVariable
                spec:
                    datasource:
                        kind: PrometheusDatasource
                        name: prometheus-datasource
                    labelName: reporter
                    matchers:
                        - istio_requests_total{}
            name: qrep
        - kind: ListVariable
          spec:
            display:
                name: Inbound Workload Namespace
                hidden: false
            allowAllValue: true
            allowMultiple: true
            plugin:
                kind: PrometheusLabelValuesVariable
                spec:
                    datasource:
                        kind: PrometheusDatasource
                        name: prometheus-datasource
                    labelName: source_workload_namespace
                    matchers:
                        - istio_requests_total{reporter=~"$qrep", destination_workload="$workload", destination_workload_namespace=~"$namespace"}
            name: srcns
        - kind: ListVariable
          spec:
            display:
                name: Inbound Workload
                hidden: false
            allowAllValue: true
            allowMultiple: true
            plugin:
                kind: PrometheusLabelValuesVariable
                spec:
                    datasource:
                        kind: PrometheusDatasource
                        name: prometheus-datasource
                    labelName: source_workload
                    matchers:
                        - istio_requests_total{reporter=~"$qrep", destination_workload="$workload", destination_workload_namespace=~"$namespace", source_workload_namespace=~"$srcns"}
            name: srcwl
        - kind: ListVariable
          spec:
            display:
                name: Destination Service
                hidden: false
            allowAllValue: true
            allowMultiple: true
            plugin:
                kind: PrometheusPromQLVariable
                spec:
                    datasource:
                        kind: PrometheusDatasource
                        name: prometheus-datasource
                    expr: sum(istio_requests_total{reporter="source", source_workload=~"$workload", source_workload_namespace=~"$namespace"}) by (destination_service) or sum(istio_tcp_sent_bytes_total{reporter="source", source_workload=~"$workload", source_workload_namespace=~"$namespace"}) by (destination_service)
                    labelName: destination_service
            name: dstsvc
    panels:
        "0_0":
            kind: Panel
            spec:
                display:
                    name: WORKLOAD
                plugin:
                    kind: Markdown
                    spec:
                        text: |-
                            <div class="dashboard-header text-center">
                            <span>WORKLOAD: $workload.$namespace</span>
                            </div>
        "1_0":
            kind: Panel
            spec:
                display:
                    name: Incoming Request Volume
                plugin:
                    kind: StatChart
                    spec:
                        calculation: last
                        thresholds:
                            mode: absolute
                            defaultColor: green
                            steps:
                                - value: 0
                                  color: green
                                - value: 80
                                  color: red
                        sparkline:
                            width: 1
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum(
                                        irate(
                                          istio_requests_total{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[5m]
                                        )
                                      ),
                                      0.001
                                    )
        "1_1":
            kind: Panel
            spec:
                display:
                    name: Incoming Success Rate (non-5xx responses)
                plugin:
                    kind: StatChart
                    spec:
                        calculation: mean
                        format:
                            unit: percent-decimal
                        thresholds:
                            mode: absolute
                            defaultColor: green
                            steps:
                                - value: 0
                                  color: rgba(50, 172, 45, 0.97)
                                - value: 95
                                  color: rgba(237, 129, 40, 0.89)
                                - value: 99
                                  color: rgba(245, 54, 54, 0.9)
                        sparkline:
                            width: 1
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum(
                                        irate(
                                          istio_requests_total{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",response_code!~"5.*"}[5m]
                                        )
                                      )
                                    /
                                      sum(
                                        irate(
                                          istio_requests_total{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[5m]
                                        )
                                      )
        "1_2":
            kind: Panel
            spec:
                display:
                    name: Request Duration
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: right
                            mode: list
                        yAxis:
                            format:
                                unit: seconds
                        visual:
                            display: line
                            lineWidth: 1
                            areaOpacity: 0.1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.5,
                                            sum by (le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.5,
                                        sum by (le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: P50
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.9,
                                            sum by (le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.9,
                                        sum by (le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: P90
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.99,
                                            sum by (le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.99,
                                        sum by (le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: P99
        "2_0":
            kind: Panel
            spec:
                display:
                    name: TCP Server Traffic
                plugin:
                    kind: StatChart
                    spec:
                        calculation: mean
                        format:
                            unit: bytes/sec
                        thresholds:
                            mode: absolute
                            defaultColor: green
                            steps:
                                - value: 0
                                  color: green
                                - value: 80
                                  color: red
                        sparkline:
                            width: 1
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum(
                                        irate(
                                          istio_tcp_sent_bytes_total{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                        )
                                      )
                                    +
                                      sum(
                                        irate(
                                          istio_tcp_received_bytes_total{destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep"}[1m]
                                        )
                                      )
        "2_1":
            kind: Panel
            spec:
                display:
                    name: TCP Client Traffic
                plugin:
                    kind: StatChart
                    spec:
                        calculation: mean
                        format:
                            unit: bytes/sec
                        thresholds:
                            mode: absolute
                            defaultColor: green
                            steps:
                                - value: 0
                                  color: green
                                - value: 80
                                  color: red
                        sparkline:
                            width: 1
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum(
                                        irate(
                                          istio_tcp_sent_bytes_total{reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    +
                                      sum(
                                        irate(
                                          istio_tcp_received_bytes_total{reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
        "3_0":
            kind: Panel
            spec:
                display:
                    name: INBOUND WORKLOADS
                plugin:
                    kind: Markdown
                    spec:
                        text: |-
                            <div class="dashboard-header text-center">
                            <span>INBOUND WORKLOADS</span>
                            </div>
        "4_0":
            kind: Panel
            spec:
                display:
                    name: Incoming Requests By Source And Response Code
                    description: Request volume to workload by source
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: requests/sec
                        visual:
                            display: line
                            lineWidth: 0.25
                            areaOpacity: 0.5
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (source_workload, source_workload_namespace, response_code) (
                                        irate(
                                          istio_requests_total{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: "{{ source_workload }}.{{ source_workload_namespace }} : {{ response_code }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (source_workload, source_workload_namespace, response_code) (
                                        irate(
                                          istio_requests_total{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: '{{ source_workload }}.{{ source_workload_namespace }} : {{ response_code }}'
        "4_1":
            kind: Panel
            spec:
                display:
                    name: Incoming Success Rate (non-5xx responses) By Source
                    description: Success rate of requests to workload by source
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: percent
                            max: 1
                        visual:
                            display: line
                            lineWidth: 0.25
                            areaOpacity: 0.5
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_requests_total{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",response_code!~"5.*",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[5m]
                                        )
                                      )
                                    /
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_requests_total{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[5m]
                                        )
                                      )
                                seriesNameFormat: "{{ source_workload }}.{{ source_workload_namespace }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_requests_total{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",response_code!~"5.*",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[5m]
                                        )
                                      )
                                    /
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_requests_total{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[5m]
                                        )
                                      )
                                seriesNameFormat: '{{ source_workload }}.{{ source_workload_namespace }}'
        "5_0":
            kind: Panel
            spec:
                display:
                    name: Incoming Request Duration By Source
                    description: Request duration percentiles for workload
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: milliseconds
                        visual:
                            display: line
                            lineWidth: 0.25
                            areaOpacity: 0.5
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.5,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.5,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P50 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.9,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.9,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P90 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.95,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.95,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P95 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.99,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.99,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.5,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.5,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P50'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.9,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.9,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P90'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.95,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.95,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P95'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.99,
                                            sum by (source_workload, source_workload_namespace, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.99,
                                        sum by (source_workload, source_workload_namespace, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P99'
        "5_1":
            kind: Panel
            spec:
                display:
                    name: Incoming Request Size By Source
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: bytes
                        visual:
                            display: line
                            lineWidth: 1
                            areaOpacity: 0.1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P50 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}}  P90 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P95 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}}  P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}}  P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P50'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P90'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P95'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P99'
        "5_2":
            kind: Panel
            spec:
                display:
                    name: Response Size By Source
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: bytes
                        visual:
                            display: line
                            lineWidth: 1
                            areaOpacity: 0.1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P50 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}}  P90 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}} P95 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{source_workload}}.{{source_workload_namespace}}  P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P50'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P90'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P95'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (source_workload, source_workload_namespace, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{source_workload}}.{{source_workload_namespace}} P99'
        "6_0":
            kind: Panel
            spec:
                display:
                    name: Bytes Received from Incoming TCP Connection
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: bytes/sec
                        visual:
                            display: line
                            lineWidth: 1
                            areaOpacity: 0.1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_tcp_received_bytes_total{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[$__rate_interval]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: "{{ source_workload }}.{{ source_workload_namespace}} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_tcp_received_bytes_total{connection_security_policy!="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[$__rate_interval]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: '{{ source_workload }}.{{ source_workload_namespace}}'
        "6_1":
            kind: Panel
            spec:
                display:
                    name: Bytes Sent to Incoming TCP Connection
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: bytes/sec
                        visual:
                            display: line
                            lineWidth: 1
                            areaOpacity: 0.1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (source_workload, source_workload_namespace) (
                                        irate(
                                          istio_tcp_sent_bytes_total{connection_security_policy="mutual_tls",destination_workload=~"$workload",destination_workload_namespace=~"$namespace",reporter=~"$qrep",source_workload=~"$srcwl",source_workload_namespace=~"$srcns"}[$__rate_interval]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: "{{ destination_service }} : {{ response_code }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service, response_code) (
                                        irate(
                                          istio_requests_total{destination_principal!~"spiffe.*",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: '{{ destination_service }} : {{ response_code }}'
        "7_0":
            kind: Panel
            spec:
                display:
                    name: OUTBOUND SERVICES
                plugin:
                    kind: Markdown
                    spec:
                        text: |-
                            <div class="dashboard-header text-center">
                            <span>OUTBOUND SERVICES</span>
                            </div>
        "8_0":
            kind: Panel
            spec:
                display:
                    name: Outgoing Requests By Destination And Response Code
                    description: Request volume from workload to destinations
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis: {}
                        visual:
                            display: line
                            lineWidth: 1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service, response_code) (
                                        irate(
                                          istio_requests_total{destination_principal=~"spiffe.*",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: "{{ destination_service }} : {{ response_code }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service, response_code) (
                                        irate(
                                          istio_requests_total{destination_principal!~"spiffe.*",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: '{{ destination_service }} : {{ response_code }}'
        "8_1":
            kind: Panel
            spec:
                display:
                    name: Outgoing Success Rate (non-5xx responses) By Destination
                    description: Success rate of outgoing requests from workload
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: percent
                            max: 1
                        visual:
                            display: line
                            lineWidth: 1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum by (destination_service) (
                                        irate(
                                          istio_requests_total{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",response_code!~"5.*",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      )
                                    /
                                      sum by (destination_service) (
                                        irate(
                                          istio_requests_total{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      )
                                seriesNameFormat: "{{ destination_service }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      sum by (destination_service) (
                                        irate(
                                          istio_requests_total{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",response_code!~"5.*",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      )
                                    /
                                      sum by (destination_service) (
                                        irate(
                                          istio_requests_total{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[5m]
                                        )
                                      )
                                seriesNameFormat: '{{ destination_service }}'
        "9_0":
            kind: Panel
            spec:
                display:
                    name: Outgoing Request Duration By Destination
                    description: Request volume from workload to destinations
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis: {}
                        visual:
                            display: line
                            lineWidth: 1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.5,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.5,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{ destination_service }} P50 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.9,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.9,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{ destination_service }} P90 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.95,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.95,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{ destination_service }} P95 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.99,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.99,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: "{{ destination_service }} P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.5,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.5,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{ destination_service }} P50'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.9,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.9,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{ destination_service }} P90'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.95,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.95,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{ destination_service }} P95'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |4-
                                      (
                                          histogram_quantile(
                                            0.99,
                                            sum by (destination_service, le) (
                                              irate(
                                                istio_request_duration_milliseconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                              )
                                            )
                                          )
                                        /
                                          1000
                                      )
                                    or
                                      histogram_quantile(
                                        0.99,
                                        sum by (destination_service, le) (
                                          irate(
                                            istio_request_duration_seconds_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                          )
                                        )
                                      )
                                seriesNameFormat: '{{ destination_service }} P99'
        "9_1":
            kind: Panel
            spec:
                display:
                    name: Outgoing Request Size By Destination
                    description: Request volume from workload to destinations
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis: {}
                        visual:
                            display: line
                            lineWidth: 1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P50 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P90 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P95 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P50'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P90'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P95'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_request_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P99'
        "9_2":
            kind: Panel
            spec:
                display:
                    name: Response Size By Destination
                    description: Request volume from workload to destinations
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis: {}
                        visual:
                            display: line
                            lineWidth: 1
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P50 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P90 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }} P95 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: "{{ destination_service }}  P99 (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.5,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P50'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.9,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P90'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.95,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P95'
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    histogram_quantile(
                                      0.99,
                                      sum by (destination_service, le) (
                                        irate(
                                          istio_response_bytes_bucket{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      )
                                    )
                                seriesNameFormat: '{{ destination_service }} P99'
        "10_0":
            kind: Panel
            spec:
                display:
                    name: Bytes Sent on Outgoing TCP Connection
                    description: TCP bytes sent from workload
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: bytes/sec
                        visual:
                            display: line
                            lineWidth: 0.25
                            areaOpacity: 0.5
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service) (
                                        irate(
                                          istio_tcp_received_bytes_total{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: "{{ destination_service }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service) (
                                        irate(
                                          istio_tcp_received_bytes_total{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[1m]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: '{{ destination_service }}'
        "10_1":
            kind: Panel
            spec:
                display:
                    name: Bytes Received from Outgoing TCP Connection
                    description: TCP bytes received by workload
                plugin:
                    kind: TimeSeriesChart
                    spec:
                        legend:
                            position: bottom
                            mode: list
                        yAxis:
                            format:
                                unit: bytes/sec
                        visual:
                            display: line
                            lineWidth: 0.25
                            areaOpacity: 0.5
                            palette:
                                mode: auto
                queries:
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service) (
                                        irate(
                                          istio_tcp_received_bytes_total{connection_security_policy="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[$__rate_interval]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: "{{ destination_service }} (\U0001F510mTLS)"
                    - kind: TimeSeriesQuery
                      spec:
                        plugin:
                            kind: PrometheusTimeSeriesQuery
                            spec:
                                datasource:
                                    kind: PrometheusDatasource
                                    name: prometheus-datasource
                                query: |-
                                    round(
                                      sum by (destination_service) (
                                        irate(
                                          istio_tcp_received_bytes_total{connection_security_policy!="mutual_tls",destination_service=~"$dstsvc",reporter="source",source_workload=~"$workload",source_workload_namespace=~"$namespace"}[$__rate_interval]
                                        )
                                      ),
                                      0.001
                                    )
                                seriesNameFormat: '{{ destination_service }}'
    layouts:
        - kind: Grid
          spec:
            display:
                title: General
            items:
                - x: 0
                  "y": 0
                  width: 24
                  height: 3
                  content:
                    $ref: '#/spec/panels/0_0'
        - kind: Grid
          spec:
            display:
                title: General (II)
            items:
                - x: 0
                  "y": 0
                  width: 8
                  height: 4
                  content:
                    $ref: '#/spec/panels/1_0'
                - x: 8
                  "y": 0
                  width: 8
                  height: 4
                  content:
                    $ref: '#/spec/panels/1_1'
                - x: 16
                  "y": 0
                  width: 8
                  height: 4
                  content:
                    $ref: '#/spec/panels/1_2'
        - kind: Grid
          spec:
            display:
                title: General (III)
            items:
                - x: 0
                  "y": 0
                  width: 12
                  height: 4
                  content:
                    $ref: '#/spec/panels/2_0'
                - x: 12
                  "y": 0
                  width: 12
                  height: 4
                  content:
                    $ref: '#/spec/panels/2_1'
        - kind: Grid
          spec:
            display:
                title: Inbound Workloads
            items:
                - x: 0
                  "y": 0
                  width: 24
                  height: 3
                  content:
                    $ref: '#/spec/panels/3_0'
        - kind: Grid
          spec:
            display:
                title: Inbound Workloads
            items:
                - x: 0
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/4_0'
                - x: 12
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/4_1'
        - kind: Grid
          spec:
            display:
                title: Inbound Workloads (II)
            items:
                - x: 0
                  "y": 0
                  width: 8
                  height: 6
                  content:
                    $ref: '#/spec/panels/5_0'
                - x: 8
                  "y": 0
                  width: 8
                  height: 6
                  content:
                    $ref: '#/spec/panels/5_1'
                - x: 16
                  "y": 0
                  width: 8
                  height: 6
                  content:
                    $ref: '#/spec/panels/5_2'
        - kind: Grid
          spec:
            display:
                title: Inbound Workloads (III)
            items:
                - x: 0
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/6_0'
                - x: 12
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/6_1'
        - kind: Grid
          spec:
            display:
                title: Outbound Services
            items:
                - x: 0
                  "y": 0
                  width: 24
                  height: 3
                  content:
                    $ref: '#/spec/panels/7_0'
        - kind: Grid
          spec:
            display:
                title: Outbound Services (II)
            items:
                - x: 0
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/8_0'
                - x: 12
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/8_1'
        - kind: Grid
          spec:
            display:
                title: Outbound Services (III)
            items:
                - x: 0
                  "y": 0
                  width: 8
                  height: 6
                  content:
                    $ref: '#/spec/panels/9_0'
                - x: 8
                  "y": 0
                  width: 8
                  height: 6
                  content:
                    $ref: '#/spec/panels/9_1'
                - x: 16
                  "y": 0
                  width: 8
                  height: 6
                  content:
                    $ref: '#/spec/panels/9_2'
        - kind: Grid
          spec:
            display:
                title: Outbound Services (IV)
            items:
                - x: 0
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/10_0'
                - x: 12
                  "y": 0
                  width: 12
                  height: 6
                  content:
                    $ref: '#/spec/panels/10_1'
    duration: 1h
